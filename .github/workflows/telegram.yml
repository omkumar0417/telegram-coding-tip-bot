name: Daily Telegram Tip Bot

on:
  schedule:
    # - cron: '*/1 * * * *'  # Every 1 minute (UTC)
    - cron: '55 0 * * *' # 12:55 AM UTC
    - cron: '56 0 * * *' # 12:56 AM
    - cron: '57 0 * * *' # 12:57 AM
    - cron: '58 0 * * *' # 12:58 AM
    - cron: '59 0 * * *' # 12:59 AM
    - cron: '0 1 * * *' # 1:00 AM
    - cron: '1 1 * * *' # 1:01 AM
    - cron: '2 1 * * *' # 1:02 AM
    - cron: '3 1 * * *' # 1:03 AM
    - cron: '4 1 * * *' # 1:04 AM
    - cron: '5 1 * * *' # 1:05 AM
    - cron: '6 1 * * *' # 1:06 AM
    - cron: '7 1 * * *' # 1:07 AM
    - cron: '8 1 * * *' # 1:08 AM
    - cron: '9 1 * * *' # 1:09 AM
    - cron: '10 1 * * *' # 1:10 AM
  workflow_dispatch:       # Manual trigger from GitHub UI

jobs:
  send-tip:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install dependencies
        run: |
          pip install -r requirements.txt

      - name: Run Telegram bot
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHANNEL: ${{ secrets.TELEGRAM_CHANNEL }}
        run: python telegram_bot.py
