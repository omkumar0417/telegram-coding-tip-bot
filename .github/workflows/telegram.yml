name: Daily Telegram Tip Bot

on:
  schedule:

    # ─── IST-based triggers ───
    # Runs every minute from 1:34 AM to 2:34 AM IST (which is 20:04 to 21:04 UTC)
    - cron: '4 20 * * *'
    - cron: '5 20 * * *'
    - cron: '6 20 * * *'
    - cron: '7 20 * * *'
    - cron: '8 20 * * *'
    - cron: '9 20 * * *'
    - cron: '10 20 * * *'
    - cron: '11 20 * * *'
    - cron: '12 20 * * *'
    - cron: '13 20 * * *'
    - cron: '14 20 * * *'
    - cron: '15 20 * * *'
    - cron: '16 20 * * *'
    - cron: '17 20 * * *'
    - cron: '18 20 * * *'
    - cron: '19 20 * * *'
    - cron: '20 20 * * *'
    - cron: '21 20 * * *'
    - cron: '22 20 * * *'
    - cron: '23 20 * * *'
    - cron: '24 20 * * *'
    - cron: '25 20 * * *'
    - cron: '26 20 * * *'
    - cron: '27 20 * * *'
    - cron: '28 20 * * *'
    - cron: '29 20 * * *'
    - cron: '30 20 * * *'
    - cron: '31 20 * * *'
    - cron: '32 20 * * *'
    - cron: '33 20 * * *'
    - cron: '34 20 * * *'
    - cron: '35 20 * * *'
    - cron: '36 20 * * *'
    - cron: '37 20 * * *'
    - cron: '38 20 * * *'
    - cron: '39 20 * * *'
    - cron: '40 20 * * *'
    - cron: '41 20 * * *'
    - cron: '42 20 * * *'
    - cron: '43 20 * * *'
    - cron: '44 20 * * *'
    - cron: '45 20 * * *'
    - cron: '46 20 * * *'
    - cron: '47 20 * * *'
    - cron: '48 20 * * *'
    - cron: '49 20 * * *'
    - cron: '50 20 * * *'
    - cron: '51 20 * * *'
    - cron: '52 20 * * *'
    - cron: '53 20 * * *'
    - cron: '54 20 * * *'
    - cron: '55 20 * * *'
    - cron: '56 20 * * *'
    - cron: '57 20 * * *'
    - cron: '58 20 * * *'
    - cron: '59 20 * * *'
    - cron: '0 21 * * *'
    - cron: '1 21 * * *'
    - cron: '2 21 * * *'
    - cron: '3 21 * * *'
    - cron: '4 21 * * *'

    # ─── UTC-based triggers (same as above, listed again for clarity) ───
    # These lines repeat the same schedule but annotated as UTC for clarity/documentation.
    - cron: '4 20 * * *'   # 1:34 AM IST
    - cron: '5 20 * * *'   # 1:35 AM IST
    - cron: '6 20 * * *'   # 1:36 AM IST
    - cron: '7 20 * * *'
    - cron: '8 20 * * *'
    - cron: '9 20 * * *'
    - cron: '10 20 * * *'
    - cron: '11 20 * * *'
    - cron: '12 20 * * *'
    - cron: '13 20 * * *'
    - cron: '14 20 * * *'
    - cron: '15 20 * * *'
    - cron: '16 20 * * *'
    - cron: '17 20 * * *'
    - cron: '18 20 * * *'
    - cron: '19 20 * * *'
    - cron: '20 20 * * *'
    - cron: '21 20 * * *'
    - cron: '22 20 * * *'
    - cron: '23 20 * * *'
    - cron: '24 20 * * *'
    - cron: '25 20 * * *'
    - cron: '26 20 * * *'
    - cron: '27 20 * * *'
    - cron: '28 20 * * *'
    - cron: '29 20 * * *'
    - cron: '30 20 * * *'
    - cron: '31 20 * * *'
    - cron: '32 20 * * *'
    - cron: '33 20 * * *'
    - cron: '34 20 * * *'
    - cron: '35 20 * * *'
    - cron: '36 20 * * *'
    - cron: '37 20 * * *'
    - cron: '38 20 * * *'
    - cron: '39 20 * * *'
    - cron: '40 20 * * *'
    - cron: '41 20 * * *'
    - cron: '42 20 * * *'
    - cron: '43 20 * * *'
    - cron: '44 20 * * *'
    - cron: '45 20 * * *'
    - cron: '46 20 * * *'
    - cron: '47 20 * * *'
    - cron: '48 20 * * *'
    - cron: '49 20 * * *'
    - cron: '50 20 * * *'
    - cron: '51 20 * * *'
    - cron: '52 20 * * *'
    - cron: '53 20 * * *'
    - cron: '54 20 * * *'
    - cron: '55 20 * * *'
    - cron: '56 20 * * *'
    - cron: '57 20 * * *'
    - cron: '58 20 * * *'
    - cron: '59 20 * * *'
    - cron: '0 21 * * *'
    - cron: '1 21 * * *'
    - cron: '2 21 * * *'
    - cron: '3 21 * * *'
    - cron: '4 21 * * *'   # 2:34 AM IST

  workflow_dispatch:

jobs:
  send-tip:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install dependencies
        run: pip install -r requirements.txt

      - name: Run Telegram bot
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHANNEL: ${{ secrets.TELEGRAM_CHANNEL }}
        run: python telegram_bot.py
